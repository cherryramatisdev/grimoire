#!/usr/bin/env ruby

actions = `php artisan list --format=json | jq -r '.namespaces.[].commands[]'`

if ENV['COMP_LINE']
  actions.each_line { |action| puts action.strip if action =~ /^#{ARGV[1].gsub(':', '\:')}/ }
  exit 0
end

exec("php artisan #{ARGV.join(' ')}")
